<div class="topbar fixed-top">
  <div class="topbar__container container">
    <div class="flex-stretch">
      <%= link_to 'IndieSumo', root_path, class: 'topbar__logo link' %>
    </div>

    <ul class="main-menu">
      <li class="main-menu__item">
        <div class="dropdown-menu">
          <a class="link is-light dropdown-toggle" href="#" data-dropdown="toggle">
            Categories
          </a>
          <div class="dropdown-content" data-dropdown="content">
            <div class="dropdown-content__items">
              <% categories_array.each do |category| %>
                <%= link_to_unless_current category.title, category, class: 'link is-dark dropdown-content__item' do %>
                  <%= link_to category.title, category, class: 'link is-dark dropdown-content__item active' %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      </li>

      <li class="main-menu__item">
        <%= link_to 'Newsletter', newsletter_path, class: 'link is-light' %>
      </li>

      <li class="main-menu__item">
        <%= link_to APP_SETTINGS['facebook_page_url'], class: 'link is-light' do %>
          <i class="fab fa-facebook"></i>
        <% end %>
      </li>

      <li class="main-menu__item">
        <%= link_to APP_SETTINGS['twitter_profile_url'], class: 'link is-light' do %>
          <i class="fab fa-twitter"></i>
        <% end %>
      </li>
    </ul>

    <%= form_with url:                 search_path,
                  method:              :get,
                  html:                { class: 'form inline main-menu__search' },
                  local:               true,
                  skip_enforcing_utf8: true do |f| %>
      <%= f.text_field :query,
                       placeholder: 'Search',
                       value:       params[:query],
                       class:       'form__field text-field' %>
      <%= f.submit 'Search', name: nil, class: 'form__field submit-button' %>
    <% end %>
  </div>
</div>
