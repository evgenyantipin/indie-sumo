<% cache @resource.lists do %>
  <div class="resource__lists">
    <ul class="nav nav-pills mb-3 mt-4 justify-content-center" id="lists" role="tablist">
      <% @resource.lists.each_with_index do |list, i| %>
        <% cache ['nav', list] do %>
          <li class="nav-item">
            <a class="nav-link <%= 'active' if i == 0 %>"
               id="list-<%= list.id %>-tab"
               data-toggle="tab"
               href="#list-<%= list.id %>" role="tab">
              <%= list.title %>
            </a>
          </li>
        <% end %>
      <% end %>
    </ul>

    <div class="tab-content mb-5" id="listsContent">
      <% @resource.lists.each_with_index do |list, i| %>
        <% cache ['content', list] do %>
          <div class="tab-pane fade <%= 'show active' if i == 0 %>" id="list-<%= list.id %>">
            <div class="row">
              <% cache list.items do %>
                <% list.items.each do |list_item| %>
                  <% cache list_item do %>
                    <% if list_item.is_a?(Resource) %>
                      <%= render 'resources/resource', resource: list_item %>
                    <% else %>
                      <%= render 'resources/external_resource', external_resource: list_item %>
                    <% end %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
